我需要用unity写一个做菜挣钱的2d游戏，我们扮演的是一个地摊摊主，主界面是一张桌布上面有若干厨具：菜刀，砧板，锅，烤箱......（种类可以参考胡闹厨房），
摊位上有四个顾客会显示出自己想吃的菜，后续的顾客显示xx人在排队。我们需要做出这四个顾客想吃的菜，只能从第一个顾客的菜开始上菜，但是可以把后续顾客的菜
提前做好，以便第一个顾客的菜上完之后可以马上上第二个顾客的菜。第一个顾客拿到自己的菜之后会支付相应的金币，并且根据菜品的评分来给出好评或者差评，
我们做菜是根据食谱来的，我们只能制作自己有的食谱里面的菜，食谱需要定义做菜的详细步骤，包括加哪些调料，需要哪些食材制作出来的。使用挣的钱我们可以去买各种不同的小摊车
，不同的车上面搭载不同的厨具，有不同的载重，食材也有自己的重量，所以采购食材的时候需要充分考虑车子装不装得下。我们每一天的摆摊时间可以是8-24点，你可以随时选择收摊
但是收摊之后当天无法继续摆摊，游戏里一天的实际差不多为实际时间的15分钟。我们可以随时查看历史流水的折线图，也可以随时查看食谱，通过手机进行一些基本的操作，也可以随时查看
当地的基本地图，通过地图我们可以去各种场所，比如说商店（购买食材，菜谱），钓鱼场（钓鱼，获得稀有鱼类的方式），家（回家，家里会有各种交互可以做）。
请你设计一个扩展性强的，游戏系统。给出模块之间的关系。将这个游戏拆分成很细很明确的需求（包括需要的美术资源，需要哪些功能性脚本），分条列出，需求之间的依赖性尽可能小。
需求文档如下：2D地摊做菜挣钱游戏 - 细化需求与系统设计

一、核心基础设定（全局通用规则）

1. 核心玩法：玩家扮演地摊摊主，通过按食谱制作菜品满足顾客需求赚取金币，升级摊车、采购食材/食谱，拓展经营规模

2. 时间规则：游戏内1天对应现实15分钟，摆摊时间为游戏内8:00-24:00；玩家可随时收摊，收摊后当日无法再次摆摊

3. 核心限制：食材有重量，摊车有载重上限，采购食材时需满足“食材总重≤摊车载重”

4. 操作核心：通过点击/拖拽操作厨具、食材、调料完成做菜；支持通过“手机”“地图”触发各类系统功能

二、模块划分及模块间关系

1. 核心模块清单

基础模块：全局配置模块、输入控制模块、资源管理模块
核心玩法模块：摆摊经营模块、做菜系统模块、顾客系统模块
成长模块：摊车升级模块、食谱解锁模块、食材管理模块
功能拓展模块：场景跳转模块、数据统计模块、交互功能模块

2. 模块间核心关系

- 全局配置模块为所有模块提供基础参数（如时间换算、基础金币单位、界面适配规则）

- 输入控制模块向摆摊经营、做菜、场景跳转等模块传递用户操作指令（点击、拖拽、切换）

- 资源管理模块为做菜、摊车、顾客等模块提供美术资源（食材、厨具、角色 sprite）和配置数据（食谱步骤、摊车参数）

- 摆摊经营模块是核心枢纽，关联顾客系统（生成顾客）、做菜系统（制作菜品）、食材管理（消耗食材）、数据统计（记录收入）

- 摊车升级模块影响食材管理模块（载重上限）和做菜系统模块（可用厨具种类）

- 食谱解锁模块为做菜系统模块提供可制作菜品的规则（步骤、食材、调料）

- 场景跳转模块依赖资源管理模块加载对应场景资源，同时关联交互功能模块（场景内交互逻辑）

- 数据统计模块接收摆摊经营模块的收入数据，生成历史流水报表

三、细化需求清单（按模块拆分，含美术、脚本）

模块1：全局配置模块（无直接美术需求，为其他模块提供基础规则）

功能性需求

1. 实现游戏内时间与现实时间的换算（15分钟现实时间 = 游戏内1天），实时更新游戏内时钟（显示8:00-24:00）

2. 定义基础单位规则：金币单位、食材重量单位（如“克”）、摊车载重单位（如“千克”）

3. 提供全局状态管理：记录当前是否处于“摆摊中”“收摊”“场景跳转中”等状态，禁止跨状态非法操作（如收摊后无法做菜）

4. 实现存档/读档功能：自动存档关键数据（金币数量、已解锁食谱、摊车类型、食材库存、历史流水、当前游戏内日期），支持手动读档

5. 定义界面层级规则：确保弹出界面（如手机、地图、食谱）层级高于主界面，避免遮挡异常

所需脚本

- GlobalConfig.cs：存储全局静态参数（时间换算比例、单位规则、界面层级）

- GameTimeManager.cs：管理游戏内时间流转、时钟显示、摆摊时间限制

- GameStateManager.cs：管理全局游戏状态，提供状态查询、状态切换接口

- SaveLoadManager.cs：处理存档数据的序列化/反序列化，实现自动存档、手动读档

模块2：输入控制模块（无独立美术需求，适配所有操作场景）

功能性需求

1. 支持鼠标/触屏的基础操作：点击（选中厨具、食材、按钮）、拖拽（移动食材到厨具、拖拽调料到锅具）

2. 实现操作优先级判断：弹出界面（如地图、手机）时，优先响应弹出界面内的操作，屏蔽主界面操作

3. 提供操作反馈：点击有效目标时播放点击音效，拖拽操作时显示食材/调料的跟随 sprite

4. 支持快捷键操作（可选）：如按“S”快速收摊、按“M”快速打开地图、按“R”快速打开食谱

所需脚本

- InputManager.cs：统一管理所有输入指令，提供操作回调接口给其他模块

- DragDropHandler.cs：处理拖拽逻辑，包括拖拽开始、拖拽中、拖拽结束（成功/失败）的判断

- UIActionHandler.cs：处理UI按钮的点击事件，关联对应功能模块（如点击“收摊”调用GameStateManager）

模块3：资源管理模块（核心美术资源汇总，提供资源加载接口）

美术资源需求

1. 基础UI资源：
        

  - 桌布背景：2D sprite，适配游戏主界面尺寸，风格贴合地摊（如格子布、素色布）

  - 按钮图标：收摊按钮、手机按钮、地图按钮、食谱按钮、确认/取消按钮等，统一风格

  - 时钟UI：显示游戏内时间的数字/指针 sprite，支持动态更新

  - 金币显示UI：金币图标、数字文本框背景

2. 厨具美术资源：

  - 基础厨具：菜刀、砧板、锅、烤箱、碗、勺子、调料瓶（盐、糖、油等），均为2D sprite，支持“闲置”“使用中”两种状态切换

  - 厨具特效：菜刀切割特效、锅具加热特效、烤箱烘烤特效、调料添加特效（粒子效果 sprite）

3. 食材美术资源：
        

  - 基础食材：蔬菜（白菜、青菜、番茄等）、肉类（猪肉、牛肉等）、主食（米、面等）、调料（盐粒、糖块等），2D sprite，部分支持“原始状态”“处理后状态”（如番茄→番茄块）

  - 稀有食材：各类鱼类（普通鱼、稀有鱼），2D sprite，区分不同鱼类外观

4. 摊车美术资源：
       

  - 多种摊车：基础地摊车、升级款餐车等，2D sprite，显示对应搭载的厨具外观，区分不同摊车的视觉风格

  - 摊车载重提示UI：进度条 sprite，用于显示当前食材总重/摊车最大载重

5. 顾客美术资源：


  - 顾客角色：至少4种不同外观的顾客2D sprite，支持“等待”“满意”“不满意”三种表情/动作切换

  - 需求显示UI：顾客头顶气泡框 sprite，内部可显示菜品图标/名称

  - 排队提示UI：“XX人在排队”文本背景 sprite

6. 场景美术资源：

  - 主场景（摆摊场景）：地摊周围环境（如街道、路人剪影、路灯等），2D背景图

  - 地图资源：当地地图背景2D sprite，标记商店、钓鱼场、家的位置图标

  - 子场景背景：商店内部背景、钓鱼场背景、家内部背景，均为2D场景图

7. 数据图表资源：折线图背景、坐标轴、数据点、折线 sprite，用于显示历史流水

8. 手机UI资源：手机外观 sprite，内部功能按钮（流水、食谱、设置）图标

功能性需求

1. 实现资源分类加载：按“UI”“厨具”“食材”“场景”等分类管理资源，提供异步加载接口，避免卡顿

2. 管理配置数据：加载食谱配置表（JSON/Excel）、摊车配置表、食材配置表（含重量、价格），提供数据查询接口

3. 处理资源缓存：常用资源（主界面UI、当前摊车、已解锁食谱食材）常驻内存，不常用资源（未解锁场景、食谱）按需加载/卸载

所需脚本

- ResourceManager.cs：统一管理所有美术资源、配置文件的加载、缓存、卸载

- ConfigReader.cs：读取并解析食谱、摊车、食材的配置文件，转换为程序可调用的数据结构

- SpriteManager.cs：管理sprite的动态切换（如厨具状态、顾客表情），提供sprite获取接口

模块4：摆摊经营模块（核心玩法模块，关联多个子模块）

功能性需求

1. 主界面布局：
        

  - 中央显示桌布背景，桌布上摆放当前摊车搭载的厨具（按固定位置或可自定义位置）

  - 界面右侧/下方显示4个顾客位置，顾客头顶显示需求菜品；顾客后方显示排队人数提示

  - 界面顶部显示游戏内时钟、当前金币数量

  - 界面角落显示功能按钮：收摊、手机、地图、食谱

2. 摆摊流程控制：


  - 玩家点击“开始摆摊”后，触发GameStateManager切换为“摆摊中”，生成首批4名顾客

  - 支持随时点击“收摊”，触发收摊流程：清理当前顾客队列、保存当日经营数据、切换为“收摊”状态

  - 摆摊时间结束（游戏内24:00）自动收摊，弹出当日经营总结（收入、好评数、差评数）

3. 上菜与结算：


  - 严格按照顾客顺序上菜：只能先给第1名顾客上菜，上菜后第1名顾客离场，后续顾客依次前移，补充新顾客到第4位

  - 支持提前制作后续顾客需求的菜品，制作完成后暂存（显示“待上菜”标记），第1名顾客离场后可直接给第2名顾客上菜

  - 顾客收到菜品后，根据菜品评分给出好评/差评：好评增加额外金币奖励，差评无额外奖励且可能减少顾客后续光顾概率（可选）

  - 结算时扣除对应食材消耗，增加菜品售价对应的金币到玩家账户，并记录到历史流水

4. 摊位状态显示：实时显示当前食材库存（核心食材剩余数量）、摊车载重使用情况（当前总重/最大载重）

所需脚本

- StallUIManager.cs：管理摆摊主界面的布局、UI元素显示/隐藏、动态更新（时钟、金币、排队人数）

- StallManager.cs：控制摆摊/收摊流程，关联顾客系统、做菜系统、食材管理系统的接口调用

- ServeManager.cs：管理上菜顺序、菜品暂存、顾客结算逻辑，处理好评/差评反馈

- StallStatusDisplay.cs：实时显示食材库存、摊车载重等摊位状态信息

模块5：做菜系统模块（核心玩法模块，依赖食谱和厨具）

功能性需求

1. 食谱管理：
        

  - 只能制作已解锁的食谱菜品，未解锁食谱无法在做菜界面显示

  - 每个食谱定义详细步骤：需使用的厨具、处理顺序（如“砧板切番茄→锅煮番茄→加调料→盛碗”）、所需食材及数量、所需调料及用量

  - 支持查看食谱详情：点击“食谱”按钮弹出食谱界面，显示已解锁食谱的完整步骤、食材、调料需求

2. 做菜操作逻辑：
        

  - 按食谱步骤执行操作：选中食材拖拽到对应厨具（如番茄拖到砧板），触发处理逻辑（切割）；处理后的食材拖拽到下一个厨具（如番茄块拖到锅）

  - 调料添加：选中调料瓶拖拽到对应厨具（如油拖到锅），需添加到食谱要求的用量（可通过进度条显示添加量，达标后提示“调料足够”）

  - 厨具状态控制：使用厨具时切换为“使用中”状态（播放对应特效），处理完成后切换回“闲置”状态，同时生成处理后的食材/菜品

  - 菜品评分：根据操作准确性（步骤是否正确、调料用量是否达标、处理时间是否过长）给出评分（如S/A/B/C级），评分影响顾客评价和金币奖励

3. 菜品暂存：提前制作的菜品（非当前第1名顾客需求）自动进入暂存区，显示对应顾客序号标记，支持查看暂存菜品列表

所需脚本

- RecipeManager.cs：管理已解锁食谱，提供食谱查询、步骤验证接口

- CookingManager.cs：核心做菜逻辑，控制步骤流转、厨具调用、食材/调料消耗验证

- KitchenwareController.cs：单个厨具的状态管理（闲置/使用中）、特效播放、处理逻辑（如切割、加热）

- DishController.cs：管理菜品的制作进度、评分计算、暂存逻辑

- RecipeUIManager.cs：管理食谱界面的显示，加载并展示已解锁食谱的详细信息

模块6：顾客系统模块（依赖摆摊经营模块，提供需求数据）

功能性需求

1. 顾客生成：
        

  - 开始摆摊后，生成首批4名顾客，后续当顾客离场（上菜后）时，从排队队列中补充新顾客（保持最多4名在场顾客）

  - 顾客需求随机：需求菜品从玩家已解锁食谱中随机选择，避免出现无法制作的菜品需求

  - 排队逻辑：当在场顾客满4名时，新顾客进入排队队列，显示“XX人在排队”提示；排队人数有上限（可选，如最多10人），超出上限后新顾客离开

2. 顾客状态管理：
        

  - 等待状态：显示“等待中”表情，头顶显示需求菜品；等待有时间限制（可选，超时未上菜则顾客离开，给出差评并记录）

  - 结算状态：收到菜品后，根据菜品评分切换为“满意”（好评）或“不满意”（差评）表情，停留几秒后离场

3. 需求显示优化：顾客需求菜品显示清晰（图标+名称），避免歧义；暂存菜品与对应顾客需求自动匹配，上菜时无需再次选择

所需脚本

- CustomerManager.cs：管理顾客的生成、排队、离场逻辑，关联StallManager获取摆摊状态

- CustomerController.cs：单个顾客的状态管理（等待、结算）、表情切换、需求显示

- CustomerDemandGenerator.cs：随机生成顾客需求（从已解锁食谱中筛选），确保需求合法性

模块7：摊车升级模块（依赖资源管理和金币系统）

功能性需求

1. 摊车属性定义：
        

  - 每种摊车有独特属性：搭载厨具种类（如基础车只能装菜刀、砧板、锅；升级车可额外装烤箱）、最大载重（如基础车10kg，升级车20kg）、购买价格（金币）

  - 摊车切换：购买新摊车后，可手动切换当前使用的摊车；切换后，主界面厨具自动更新为新摊车搭载的厨具，载重上限同步更新

2. 摊车购买逻辑：
        

  - 提供摊车商店界面（可通过地图或手机进入），显示所有可购买的摊车（未解锁摊车显示“锁定”，标注价格和所需条件）

  - 购买时验证金币是否充足，充足则扣除金币，解锁该摊车并添加到玩家摊车列表

3. 摊车状态显示：在主界面或摊车商店界面，显示当前使用的摊车名称、搭载厨具列表、剩余载重

所需脚本

- CartManager.cs：管理玩家已解锁摊车列表，处理摊车切换、属性更新逻辑

- CartShopUIManager.cs：管理摊车商店界面，显示摊车信息、购买按钮，关联金币系统验证购买力

- CartProperty.cs：存储单个摊车的属性数据（搭载厨具、载重、价格），从配置文件加载

模块8：食谱解锁模块（依赖资源管理和金币系统）

功能性需求

1. 食谱获取途径：
       

  - 商店购买：通过商店界面购买食谱，每种食谱有固定金币价格；购买后解锁，可在做菜系统中使用

  - 特殊获取（可选）：钓鱼获得稀有鱼类后，解锁对应鱼类菜品的食谱

2. 食谱解锁状态管理：
        

  - 记录所有食谱的解锁状态（已解锁/未解锁），未解锁食谱在食谱界面显示“锁定”，标注解锁途径（如“商店购买”“获取XX鱼解锁”）

  - 解锁新食谱后，弹出提示告知玩家，同时更新食谱界面显示

3. 食谱预览：未解锁食谱支持预览基础信息（菜品名称、成品外观），但不显示详细制作步骤

所需脚本

- RecipeUnlockManager.cs：管理食谱的解锁状态，处理购买解锁、特殊条件解锁逻辑

- RecipeShopUIManager.cs：管理商店中食谱的显示、购买逻辑，关联金币系统扣除金币

模块9：食材管理模块（依赖摊车模块、资源管理模块）

功能性需求

1. 食材属性定义：每种食材有固定属性（名称、重量、购买价格、保质期（可选）、对应菜品）

2. 食材采购：
        

  - 通过商店界面采购食材，选择采购数量后，计算总重量和总价格

  - 采购验证：总重量≤当前摊车剩余载重且金币充足时，方可完成采购；否则提示“载重不足”或“金币不足”

3. 食材库存管理：
        

  - 实时记录每种食材的库存数量，做菜时自动扣除对应数量（库存不足时无法制作对应菜品）

  - 支持查看库存详情：在手机或主界面弹出库存界面，显示食材名称、数量、单重、总重

  - 库存预警（可选）：食材数量低于阈值时，弹出提示告知玩家“XX食材不足，请及时采购”

4. 稀有食材获取：通过钓鱼场钓鱼获得稀有鱼类，钓鱼成功后自动添加到食材库存，同时记录获取时间

所需脚本

- IngredientManager.cs：管理食材库存，处理采购、消耗、库存查询逻辑，关联CartManager获取载重信息

- IngredientShopUIManager.cs：管理商店食材采购界面，显示食材信息、采购数量选择、总重/总价计算

- IngredientProperty.cs：存储单个食材的属性数据（重量、价格等），从配置文件加载

- InventoryUIManager.cs：显示食材库存详情，支持库存筛选（如“基础食材”“稀有食材”）

模块10：场景跳转模块（依赖资源管理模块）

功能性需求

1. 地图系统：
        

  - 提供可随时打开的地图界面，显示当地场景分布（商店、钓鱼场、家、当前摆摊位置）

  - 地图交互：点击对应场景图标，触发场景跳转（需先关闭当前弹出界面，如食谱、手机）

  - 场景状态提示：在地图上标注当前可进入的场景（如商店“营业中”），不可进入的场景标注原因（如无）

2. 场景加载逻辑：
        

  - 支持无缝切换场景：点击地图场景图标后，显示加载进度条，加载完成后切换到对应场景

  - 场景返回：子场景（商店、钓鱼场、家）中提供“返回摆摊点”按钮，点击后跳转回摆摊主场景（保留摆摊状态，除非已收摊）

3. 场景资源管理：切换场景时，卸载当前场景不必要的资源（如商店场景卸载钓鱼场资源），加载目标场景所需资源

所需脚本

- MapManager.cs：管理地图界面的显示、场景图标交互、场景跳转触发

- SceneLoader.cs：处理场景加载/卸载逻辑，显示加载进度条，关联ResourceManager加载资源

- SceneUIManager.cs：管理各子场景的基础UI（如返回按钮），统一场景切换交互逻辑

模块11：数据统计模块（依赖摆摊经营模块）

功能性需求

1. 历史流水记录：
        

  - 记录每日经营数据：日期、总收入、总支出（采购食材/食谱/摊车）、净利润、好评数、差评数

  - 支持按时间筛选：查看近7天、近30天或自定义时间段的流水数据

2. 数据可视化：
        

  - 通过折线图显示历史流水趋势（如每日净利润变化），支持切换显示数据类型（收入、支出、好评数）

  - 图表交互：点击数据点显示详细数据（日期、具体数值）

3. 数据导出（可选）：支持将历史流水数据导出为本地文件（如CSV）

所需脚本

- DataStatisticsManager.cs：记录经营数据，提供数据查询、筛选接口

- ChartManager.cs：生成折线图，处理图表数据绑定、交互逻辑（点击数据点）

- FinancialUIManager.cs：管理历史流水界面，显示图表和详细流水列表，支持筛选操作

模块12：交互功能模块（覆盖手机、家、钓鱼场交互）

功能性需求

1. 手机系统：
        

  - 提供随时打开的手机界面，集成核心功能入口：查看历史流水、查看食谱、查看库存、设置（如音效开关）

  - 手机操作逻辑：点击对应功能图标，弹出对应界面（与独立按钮功能一致，提供冗余操作入口）

2. 家场景交互：


  - 家内设置多个交互点：床（休息，跳过当前剩余摆摊时间）、冰箱（查看/存放食材，扩展库存上限）、工作台（可选，修复摊车/升级厨具）

  - 交互反馈：点击交互点播放对应动画（如上床休息动画），并触发对应功能（跳过时间后更新游戏内时钟）

3. 钓鱼场交互：
        

  - 提供钓鱼操作界面：显示鱼竿、鱼漂，通过点击/长按操作完成钓鱼（如长按蓄力，松开收竿）

  - 钓鱼概率逻辑：普通鱼获取概率高，稀有鱼获取概率低；可显示当前钓鱼成功率、已获取鱼类列表

  - 钓鱼结果：钓鱼成功后显示获得的鱼类，自动添加到食材库存；失败则提示“鱼跑了”，无损失

所需脚本

- PhoneUIManager.cs：管理手机界面的显示、功能入口绑定

- HomeInteractionManager.cs：管理家场景内各交互点的逻辑（休息、冰箱、工作台）

- FishingManager.cs：管理钓鱼操作逻辑、概率计算、结果处理（添加食材库存）

- FishingUIManager.cs：管理钓鱼界面的显示（鱼竿、鱼漂、成功率），处理钓鱼操作输入

四、需求依赖性说明（低耦合设计重点）

1. 基础模块（全局配置、输入控制、资源管理）为独立底层模块，不依赖其他业务模块，确保其他模块可直接调用其接口

2. 核心玩法模块（摆摊、做菜、顾客）之间通过接口通信，而非直接依赖：如做菜系统不直接调用顾客系统，而是通过摆摊模块传递菜品信息

3. 成长模块（摊车、食谱、食材）依赖基础模块和核心模块的接口，但彼此独立：如食谱解锁不依赖摊车升级，仅在做菜时验证厨具是否满足

4. 功能拓展模块（场景跳转、数据统计、交互功能）为可选扩展模块，即使暂时不实现，也不影响核心玩法的正常运行（如钓鱼场未实现，仅影响稀有食材获取，不影响基础做菜）

5. 所有模块通过“管理器脚本”提供统一接口，避免直接操作其他模块的内部逻辑，降低修改时的连锁影响（如修改收摊逻辑只需改动StallManager，无需修改顾客、做菜模块）
根据上面文档直接给出核心的做菜系统的所有完整代码。UI和场景的物体暂时可以用简单的2d图形代替，以便可以快速验证玩法。你的代码要支持后续有美术资源的时候可以很方便的替换。并且完成之后输出一个简单的进度说明

当前进度：
Assets/
├─ Scripts/
│  ├─ CookingSystem/      // 做菜系统核心脚本
│  ├─ Core/               // 核心数据结构
│  └─ UI/                 // 做菜系统UI脚本
├─ Prefabs/
│  ├─ Kitchenware/        // 厨具预制体
│  ├─ Ingredients/        // 食材预制体
│  └─ UI/                 // UI预制体
└─ Config/                // 配置文件（JSON）


请继续完成：
