1.厨具应该有默认虚方法来判断满没满。子类逻辑特殊可以重写。

游戏策划书：GameDesignDocument.md
需求文档：DetailedRequirementsDocument.md
架构文档：GameArchitectureDocument.md
进度文档：AIDevProgressDocument.md
游戏待办清单：AIToDoListDocument.md
根据以上游戏设计文档和项目代码。完成任务。改造代码完成我下面的要求。
Dish类不可以去继承monobehavior。更不能带代码里面直接new 出来，。要记录Dish可以在ingredient里面增加一个对应的数据字段，一直维护这个就好了。
DishSource{

    List<IngredientInfo>;

    cookedMethod;

    List<DishSource>;

}

IngredientInfo{
    
    string ingredientId;

    int quantity ；

}这是一个记录食物制作过程的使用了哪些材料的数据类。最后在Ingredient里面提供一些操作这个数据字段的方法。





3.厨具工作的时候上面显示一个工作中的UI。



游戏策划书：GameDesignDocument.md
需求文档：DetailedRequirementsDocument.md
架构文档：GameArchitectureDocument.md
进度文档：AIDevProgressDocument.md
游戏待办清单：AIToDoListDocument.md
根据以上游戏设计文档和项目代码。完成任务。改造代码完成我下面的要求。
根据要求重构厨具，食材，食谱系统。
2.所有的食材都是一个Ingredient。Ingredient是实际场景中的物品，有对应的各种属性。
3.所有的厨具都继承自Tool。且会在游戏开始的时候将不同的厨具替换成对应的子类。
4.食材拖动到厨具之后就会就会在厨具中来维护DishSource{

    List<IngredientInfo>;

    cookedMethod;

    List<DishSource>;

}

IngredientInfo{
    
    string ingredientId;

    int quantity ；

}这样一个变量。然后还需要清除掉拖进来的Ingredient。
5.我们需要在厨具的固定区域来维护一张图片信息。
厨具里面没有菜的时候就不需要显示。如果厨具里面有菜了我们有可能是需要显示菜的图片的。比如说砧板，烤架这种就需要显示图片，
但是锅，搅拌机这种封闭的厨具就不需要显示图片。砧板因为只能放生食材拿去切，所以可以去找图片后缀带cut的对应图片。烤架可能需要分两类，如果放入的是生食材iu需要去找带烤标签的图片。
如果放入的一种dish暂时先固定显示同一种图片。



游戏策划书：GameDesignDocument.md
需求文档：DetailedRequirementsDocument.md
架构文档：GameArchitectureDocument.md
进度文档：AIDevProgressDocument.md
游戏待办清单：AIToDoListDocument.md
根据以上游戏设计文档和当前项目代码。完成任务。改造代码完成我下面的要求。
1.有一个可以通过参数来设置的顾客区域，最多可以摆放四个顾客，当一个顾客吃完之后，后面的顾客会依次往前挪，并且再生成的顾客会排在最后面。
2.每一个顾客头顶上都显示一个自己想吃的菜。
3.游戏的做菜系统并无固定的菜谱，因为需要模拟现实世界的做菜，但是游戏中有菜谱是为了方便顾客点菜，并且当你做完一道菜之后可以通过菜谱来进行评分。菜谱应该
可以通过一些关键食材以及标签来进行评价。比如说番茄炒鸡蛋。食谱应该需要校验切好的番茄，炒好的番茄，炒好的鸡蛋，加了盐的鸡蛋，加了盐的番茄这些关键信息。如果做出的菜
缺少一些标签那么就会进行扣分，最后根据提供给客人的菜的评分来进行结算金币，影响度。不管你做的菜评分怎么样。顾客也应该支付给你盘子中 的所有食材刚买来的时候的总价*0.8 。
游戏中仍然需要菜谱，仅仅是为了给玩家查看怎么才能做做出顾客满意的菜的。需要可以通过界面来查看步骤。
4.目前的厨具应该有炒锅，烤箱，烤架，搅拌机，砧板。厨具的使用规则如下，砧板只能用来切可以被切的生食材，切完之后会把对应的dishSource信息添加到 Tool下方的DishSource字段下。需要记录
有什么食材，打了什么标签，烹饪方式是什么。之后砧板不会再持有Ingredient对象，而是会直接销毁掉该对象，但是对应的切好的食材的图片，有Tool类下持有的图片显示相关的字段来显示。当砧板上的菜被盘子
取走了之后就应该清除自己的菜品信息。因为相关的菜品信息已经转移到盘子上了。
烤架，可以有若干个位置来摆放可以烤的生食材。比如说烤架可以放四个土豆同时进行烹饪，每个烹饪区域有自己独立的烹饪时间（这个是和其他厨具都不一样的地方），盘子一次应该只能从一个区域取走烤好的食物，
这些区域相互独立。独立区域的图片显示逻辑和砧板一样，而且每个独立区域应有自己的dishSource。锅的作用是可以混合食物，并且给里面所有的食材打上一层cooked标签，并且还可以往锅里添加对应的调料
来增加不同的标签，比如说增加盐为锅里所有的食材增加一层salt标签，这些信息应该都是记录在DishSource里面的。搅拌机能将生食材搅拌成xx液，包括牛肉拿去搅拌也会变成牛肉液，会给里面的食材打上已搅拌的标签，支持多种食材混合
最多支持三种。
烤箱可以把任何食物放进去进行烤制，（注意这里的厨具的动作都是通过修改dishSource里面的字段完成的，因为实际的ingredient已经被删除了）会被里面所有来源的食材打上已烤制以及cooked标签，
。所有有加热功能的厨具都可以给食材打上cooked的标签，但是最后盘子里装的菜里面的dishSource要是有哪种食材cooked超过了3，那就是糊了。其他的标签同理，比如说salt标签超过三层那就是太闲了。最后
都会影响顾客的评价，有些菜谱可能会有些特殊要求，比如说不能太咸了，那salt标签是3就会严重降低评分。不同的菜谱都有自己独特的需要注意的地方。
5.厨具和食材之间的交互。生食材可以放到任何厨具中进行处理并且打上标签。食材拖入厨具中视为将食材放到厨具中进行处理，此时厨具便会开始工作。
将代码改成符合我上面的要求的。



1.先查看下列要求，有必要的话，写一个生成预制体Panel的脚本，可以去Editor目录下参考现有的脚本。
2.拖拽的时候支持进行处理的厨具应该有一个高亮的描边的效果。（不用通过简单的复制一层放大一点，设置颜色，放到背景这样的方式，效果很差）
3.厨具工作的时候上面显示一个工作中的UI，做成常见的三个点循环出现的样子（很多等待中效果常用的）。
4.tool里面播放厨具工作音效通过SoundManager来管理。在机器启动的时候播放音效，在机器关闭的时候停止播放音效。烹饪的音效为循环音效。
5. public virtual Ingredient ProcessIngredient(Ingredient ingredient, string cookingMethod)
        {
            if (ingredient == null || !StartUsing(ingredient))
                return null;
            
            // 检查烹饪方式是否可用
            if (!AvailableCookingMethods.Contains(cookingMethod))
            {
                Debug.LogWarning($"Cooking method {cookingMethod} is not available for {ToolId}");
                StopUsing();
                return null;
            }
            
            // 计算耐久度消耗
            float durabilityCost = CalculateDurabilityCost(cookingMethod);
            Durability -= durabilityCost;
            
            // 启动协程处理食材，添加动画延迟
            StartCoroutine(ProcessIngredientWithDelay(ingredient, cookingMethod));
            
            return ingredient;
        }里面的StartUsing逻辑不对不能在开始使用的时候就销毁食材（只能先隐藏食材），万一拖拽失败了食材是需要还原的。
6.食谱系统和现在不符，食谱应该能展示出菜谱制作步骤。参考DishSource的存储，他可以是嵌套的。比如说制作一道复杂的菜可能是多步骤的中间会出现诸多中间dish的。
食谱的匹配应该和dishSource进行匹配。如果匹配到了对应的食谱，返回食谱的信息。食谱应该也要记录最终菜的图片。匹配的方式从食材的数量，不同食材各自的标签，标签强度这些来匹配。
7.实现一个简单的食谱查看的功能，首先需要一个食谱页面，点击对应的食谱之后会显示出制作的详细步骤，第一步干啥，第二步干啥...。
7.GamePanel的顾客排队区域应该根据顾客系统实际关联上排队人数（包括显示4个人的和没显示的），需要增加一个商店的按钮，结束摆摊的按钮。点击结束摆摊后应该触发每日结算。
8.实现商店页面的功能。每一个项需要显示食材的图片，名字，价格（可以通过食材配置文件获取）。商店里面也有厨具升级的按钮，点击厨具升级之后就可以选择我们现有的厨具，花费一定的金币就可以升级。



也许dishSource需要新加一个名字字段，如果只有一种食材信息那名字就是这个食材的名字。
两种以上的食材信息每添加一种新食材就把这个字段变成xxx+xxx混合物，直到混合物被装盘了。就把这个dishSource变成子dishSource并且把名字改成xxx+xxx+...+菜。显示某个dishSource的描述需要显示名字+（子dishSource名字+（子子dishSource名字...）,直到没有子dishSource
2026-01-28
游戏策划书：GameDesignDocument.md
需求文档：DetailedRequirementsDocument.md
架构文档：GameArchitectureDocument.md
进度文档：AIDevProgressDocument.md
游戏待办清单：AIToDoListDocument.md
根据以上游戏设计文档和当前项目代码。完成任务。改造代码完成我下面的要求。
1.高光描边换一种方式不要使用复制一层放大的方式，使用shader描边。
2.MainMenuPanel,GamePanel,SettingPanel，库存面板（点击之后要显示自己身上有的食材，类似背包），地图面板，触发事件的面板（会遇到特殊事件，需要给出几个按钮来显示选项，选项个数可能根据事件的不同也不一样。也需要显示选项的说明，根据不同的事件选择不同的选项应该触发不同的点击逻辑），也在生成预制体Panel的脚本生成一下，对应的UI部件需要监听上对应的方法，可以去Editor目录下参考现有的脚本。
需要注意的是GamePanel需要加入食谱按钮，点击之后会显示食谱面板。GamePanel还需要显示自己的声望，金币，饥饿值，口渴度，健康度，经验条等。
还需要停止摆摊按钮，点击之后触发每日结算。还需要有地图按钮，点击之后进入到地图面板，地图面板显示不同的可以去的地方，比如说商店，回家，人才中心，钓鱼场等（可以按照你的想象丰富一下）。地图面板上点击商店应该进入商店页面，
点击钓鱼场触发钓鱼场事件（事件具体内容和效果按照你的理解和想象与之一下），其他的按钮都可以显示功能开发中，显示禁止点击的灰色模式。
3.所有的食材都可以搅拌，搅拌机不用校验食材是否支持该烹饪方式，且搅拌好的食材装盘之后暂时固定显示同一张图片。
4.明确dishSource的操作逻辑，不具有混合功能的厨具产生dishSource的时候把操作后的食材信息放入ingredientInfos字段就好，装盘后这个单个食材信息也不会变成嵌套的dishSource。带有混合操作的厨具，比如说锅和搅拌机，装盘的时候需要把现有的ingredientInfos变成子dishSource。
5.鼠标悬浮在食材，厨具，盘子上一秒后。需要显示食材或者Tool里面菜品的名字，离开后就不显示了。如果是食材则显示食材名字，如果是厨具，则根据厨具的dishSource显示名字，如果dishSource只有一种食材（且没有子食材），则根据烹饪方式和食材来显示名字，
如果有两种以上的食材dishSource则去匹配食材或者菜谱（如果已有名字就直接使用），给出匹配度最高的食材或菜谱的名字即可，匹配之后需要把名字记录下来，以免下次重复匹配消耗性能。但是需要dishSource如果有变动的话也需要重新匹配一下。
6.再优化一下顾客系统，顾客的位置应该是场景的位置不是UI的位置，顾客不需要座位管理，因为盘子拖到顾客上就算上菜了，所有的逻辑当时就结算完。
7.每日流程不是一开始就摆摊的，需要先去弹出商店面板然后在商店买食材，之后再开始摆摊。可以直接打开库存面板，把里面的食材拖到场景中，如果一次拖动的食材是一个，直接在场景目标点生成该食材，
如果一次拖到的食材大于等于2，就在目标点生成该食材的StorageArea（如果已经有东西了就拖拽失败）。
8.根据目前我们有的基本食材，多生成一些食谱的配置（需要涵盖目前所有的食材）【便于dishSource进行匹配，食材太少了匹配效果肯定很差】，参考Editor下的脚本。
9.生成一个Debug脚本，挂在场景中之后，通过直接按键就可以模拟诸多功能。建议也写一个生成DebugPanel的脚本，这样按键不够用的时候点击该panel里面的按钮就可以直接模拟某一个功能点，比如说增加金币，减少金币
增加声望，减少声望，触发测试事件，购买某种指定数量的食材等等，需要比较详细，并且按钮分好类，要有层次感，不要遮住主场景，最好是某一类的功能我点开之后才显示一系列的按钮或者别的组件。这样就不会遮住测试场景。


2026-01-29
游戏策划书：GameDesignDocument.md
需求文档：DetailedRequirementsDocument.md
架构文档：GameArchitectureDocument.md
进度文档：AIDevProgressDocument.md
游戏待办清单：AIToDoListDocument.md
根据以上游戏设计文档和当前项目代码。完成任务。改造代码完成我下面的要求。
1.panel直接的状态流转如下。刚进入游戏的时候只显示MainMenuPanel，点击开始游戏之后显示商店面板。关闭商店面板之后整个游戏过程应该都显示GamePanel。GamePanel中应该有可以跳转到其他面板的各种按钮，且GamePanel里面的
按钮应该尽可能的不要遮挡游戏画面。点击商店按钮之后应该打开商店面板，商店里面应该有各种原材料和调料售卖。各个生成的panel中的按钮应该关联上其在游戏中的实际功能，而不是只打印一个日志。
2.这是一个轻松愉快且可爱的做菜游戏，你生成的panel风格和游戏风格不符。
3.所有的panel如果有需要传入预制体但是又没传的情况下，自己默认动态生成一个运行时的组件，比如说事件面板里面需要传入选项按钮预制体，如果没传，你就默认生成对应的按钮当成选项按钮就行了。库存面板里面需要传一个库存项预制体，没传的话同理生成默认的库存项。
其他的面板同理。
4.MainMenuPanel中字是退出游戏，功能是保存游戏，矛盾了。
5.悬浮显示文字效果没出来。我的步骤是这样的创建了一个空物体放在Canvas下，挂在对应的悬浮显示脚本。之后鼠标放在食材上或者厨具上均无显示且无日志打印。
6.修改现有的烹饪逻辑。详细说明如下：现有的功能性厨具有砧板，搅拌机，锅，烤箱，烤架。厨具脚本下挂有一个，dishSource。刚开始时为空，处理食物之后或改变这个值。
a.砧板负责切菜，所有支持切动作的食材都可以被切。切的过程没完成之后不显示Tool下的disPlay图片，也不删除原食材。
切完成后把该食材带有切标签的信息存入dishSource，，之后删除原食材。然后根据是否显示切好的菜来展示图片（砧板默认完成之后都需要展示）。砧板上有东西或者正在切菜的时候不能放入其他食材进行操作。
盘子拖拽到砧板之后，会取走砧板里面的菜品（即把砧板的dishSource转移到盘子上）。此时盘子不再显示display图片，切砧板的dishSource信息应该清空且设置到盘子上。正在使用中的砧板不支持装盘操作，其他的所有厨具都是这样。
b.搅拌机的作用是混合生食材（最多支持三种食材混合）。非Ingredient食材无法放入搅拌机里，放入一种食材，搅拌机完成之后搅拌出来的东西名字应该是食材名+液。比如说番茄直接拿去搅拌。出来的就是番茄液。如果是
放入两种或以上的食材去搅拌机里进行搅拌，搅拌机完成之后搅拌出来的东西名字应该是食材名1+食材名2+混合液。比如说番茄和鸡蛋拿到搅拌机去搅拌，出来的东西名字应该叫。番茄鸡蛋混合液。由于可以自由组合进行搅拌
装盘之后的图片都统一采用同一张图片（一种液体的图片，搅拌机在任何时候都不会显示出里面的display图片，这里讨论的是装在盘子后的图片）。正在使用的搅拌机不支持装盘操作，但是可以继续添加新原料，搅拌机的工作时间固定，仅由搅拌机等级和控制系数，
添加新的食材进行搅拌会重置工作时间，比如说搅拌机的工作时间是5s，加入了番茄工作了3秒后由加入了土豆，那么搅拌机的工作剩余时间被重置到5s。搅拌机完成工作之后里面有没被取走的食材的话就无法添加新食材进行混合。
里面的菜品被取走之后，dishSource信息转移到新的厨具上。且之后才可以正常开始工作。
c.锅无法直接放入生食材，必须是处理过的，比如切过的或者搅拌过的。在锅里放入食材之后开始计算成品菜的烹饪时间，烹饪时间由放入的食材的总重量决定，和重量成正比，放入一种食材之后就开始展示制作的进度条。
。如果在加入新的食材之后，需要重新计算成品菜的烹饪时间。并且重置进度条的进度，重新开始计时。在进度条还没完成的时候，可以添加各种调料，比如说盐，糖，味精，酱油，辣椒粉，花椒等等。加入调料不会影响
烹饪成品菜的时间。进度条完成之后，说明菜制作完成了，无法再次调味，增加食材等动作。调料的逻辑是调料有一定的使用次数，比如说100耐久的食盐。添加一次可能会消耗1-6的盐量（不同的菜品需要的盐量是不一样的），至于具体添加了多少取决于玩家的操作。
既然说到了添加调料，那就说清楚一下添加调料的逻辑，添加调料有两种逻辑，第一种：通过掷骰子添加，1-6完全随机，比如说一道菜需要的盐量是4，你一次随机到了4，那在盐度上就是完美评分，如果随机到了3，你可以选择再次
加盐，但是两次加盐随机到的点数会是完全互不影响的，你可能随机到1获得了完美盐量，也可能随机到2-6导致自己的盐量过多。当然不同的菜需要的盐量完全不相同，也可能有需要10个盐的存在。第二种添加可以自己精准控制，
当添加调料的时候会出现一个指针一个表盘，指针在数字1-6之间循环摆动，你需要看准时间点击确认添加，点击确认添加之后指针停在的地方就是此次添加的盐量，这种方式也可以多次添加（适合喜欢自己操作的玩家）。
两种操作方式由GamePanel面板上的调料添加方式按钮进行切换。其他调料的添加逻辑也一样。现在正在制作的这道菜需要多少盐由最匹配的几种食谱来决定。当锅开始做菜之后会去根据锅里的食材匹配食谱，并且列出最匹配的前三种菜。
并且显示所需的盐量，糖，等信息供你参考。
d.烤架的逻辑暂时可以不用修改。
e.烤箱的逻辑暂时不用修改。
7.食谱的要求，应该包含要求的调料及其量，要求的食材及其对应的标签，目前食材的标签只给切过的和搅拌过的两种标签。
8.根据目前我们有的基本食材，多生成一些食谱的配置（需要涵盖目前所有的食材，至少需要50个食谱）【便于dishSource进行匹配，食材太少了匹配效果肯定很差】，参考Editor下的脚本。
9.基于第6点要求的改造和7的食谱要求，根据现有的菜谱配置和食材配置以及厨具配置。梳理一份食谱文档。需要包括每道菜的详细制作步骤，包括需要放多少食材，多少调料等。第一步干什么，第二步干什么。
10.从锅里装盘之后的菜才可以上给顾客，其他的情况下，盘子里如果放的是处理过的生食材只能倒入锅中，如果将处理过的生食材拖给客户，盘子里的东西会消失，并且客户会直接走掉，并且客户不会付钱，还会降低自己的声望。
